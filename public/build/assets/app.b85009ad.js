import{$ as _}from"./jquery.44a6ccce.js";window.$=window.jQuery=_;_.ajaxSetup({headers:{"X-CSRF-TOKEN":GLOBAL.CSRF_TOKEN}});window._s={};_s.validate_input_number=function(e){var a=e||window.event;if(a.type==="paste")i=event.clipboardData.getData("text/plain");else{var i=a.keyCode||a.which;i=String.fromCharCode(i)}var t=/[0-9]|\./;t.test(i)||(a.returnValue=!1,a.preventDefault&&a.preventDefault())};$(document).on("keypress",".number-input",e=>validate_input_number(e));_s.handleFailure=function(e){let a=e.responseJSON;$(_s.dataFormId).find(".is-invalid").removeClass("is-invalid"),a&&(e.status==422&&a.errors&&$.each(a.errors,function(i,t){i=i.replaceAll(".","__"),$(_s.dataFormId).find("*[name="+i+"], #"+i).addClass("is-invalid").parent().find(".invalid-feedback").text(t)}),a.message?toastr.error(a.message):toastr.error(e.statusText))};_s.setRequiredInputsStar=function(){let e=$(document).find("*[required]");$.each(e,function(){$(this).parent().find("label").append('<span class="text-danger">*</span>')})};_s.validateForm=function(e){let a=$(e).find("*[required]"),i=0;return $.each(a,function(){$(this).val().isEmpty()&&(i++,$(this).addClass("is-invalid").parent().find(".invalid-feedback").text(lang.validation.required.replace(":attribute",$(this).parent().find("label").text().replace("*",""))))}),$.each($(e).find("input[type=email]"),function(){!$(this).val().isEmpty()&&!_s.ValidateEmail($(this).val())&&(i++,$(this).addClass("is-invalid").parent().find(".invalid-feedback").text(lang.validation.email.replace(":attribute",$(this).parent().find("label").text().replace("*",""))))}),!i};_s.ValidateEmail=function(e){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)};_s.uploadImage=function(e){let a=e.files[0]||!1;(a.size/(1024*1024)).toFixed(2);let i=$(e).attr("id").replaceAll(".","\\."),t=$(".progress_file_"+i).find(".progress-bar"),s=$(".image_showcase_"+i),d=$("#input_file_"+i),r=$(e).data("path")||!1;if(!r||!a)return!1;if(!["image/png","image/jpeg","image/webp"].includes(a.type))return toastr.error(lang.validation.mimes.replace(":values","png, jpeg, jpg, webp")),!1;t.removeClass("bg-danger bg-success").addClass("bg-primary").text("0%").width(0+"%").attr("aria-valuenow",0).parent().show();let u=new FormData;u.append("file",a),u.append("path",r),$.ajax({xhr:function(){var n=$.ajaxSettings.xhr();return n.upload&&(n.upload.onprogress=function(o){if(o.lengthComputable){var f=(o.loaded/o.total*100).toFixed(2);t.width(f+"%").attr("aria-valuenow",f).text(f+"%")}}),n},method:"POST",url:uploadUrl,data:u,dataType:"JSON",processData:!1,contentType:!1,cache:!1}).done(n=>{t.removeClass("bg-primary").addClass("bg-success").width(100+"%").attr("aria-valuenow",100).text("100%"),setTimeout(()=>{t.parent().hide()},500),s.html(`<img src="${GLOBAL.APP_URL+"/storage/"+n.path}">`).show(),d.val(n.path)}).fail(n=>{if(n.status==422)var o=n.responseJSON.message;else var o=n.statusText;t.removeClass("bg-primary").addClass("bg-danger").width(100+"%").attr("aria-valuenow",100).text(o)})};_s.openModal=function(e){$(e).addClass("show").removeAttr("aria-hidden").attr("aria-modal","true").show();let a=$('<div class="modal-backdrop fade show"></div>').appendTo("body");$(e).find("[data-bs-dismiss=modal]").click(function(){$(e).removeClass("show").attr("aria-hidden",!0).removeAttr("aria-modal").hide(),a.remove()})};_s.setupDatePicker=function(e){let a=new Date().getFullYear()+20;$("input[type=date]").each(function(i){$(this).attr("type","text"),$(this).datepicker({isRTL:GLOBAL.IS_RTL,gotoCurrent:!0,dateFormat:"yy-mm-dd",changeYear:!0,changeMonth:!0,autoclose:!0,todayHighlight:!0,todayBtn:"linked",yearRange:"1950:"+a,...e})})};_s.getUrlVars=function(e=[],a={}){for(var i=decodeURIComponent(window.location.href),t=[],s,d=window.location.search?i.slice(i.indexOf("?")+1).split("&"):[],r=0;r<d.length;r++)s=d[r].split("="),e.includes(s[0])||(t[s[0]]=s[1]||"");return t={...t,...a},t};_s.putSelectData=function(e={},a){e&&($(a).html(""),$.each(e,function(i,t){$(a).append(`<option value="${i}">${t}</option>`)}))};_s.makeTinymce=function(e){tinymce.remove(e),tinymce.init({selector:e,plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons",imagetools_cors_hosts:["picsum.photos"],menubar:"file edit view insert format tools table help",toolbar:"undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media template link anchor codesample | ltr rtl",toolbar_sticky:!1,autosave_ask_before_unload:!0,autosave_interval:"30s",autosave_prefix:"{path}{query}-{id}-",autosave_restore_when_empty:!1,autosave_retention:"2m",image_advtab:!0})};String.prototype.isEmpty=function(){return this.length===0||!this.trim()};let g=window._s;(function(e){let a=document.querySelector(".page-sidebar"),i=document.querySelector(".mnav__phone-bars"),t={};i.onclick=t.toggleSidebar=function(){if(a.classList.toggle("active"),a.classList.contains("active"))i.classList.add("active"),document.querySelector(".sidebar-backdrop")||t.createSidebarBackdrop();else{i.classList.remove("active");let s=document.querySelector(".sidebar-backdrop");s&&s.remove()}},t.createSidebarBackdrop=function(){let s=document.createElement("div");s.classList.add("sidebar-backdrop"),s.onclick=function(){t.toggleSidebar()},document.querySelector("body").appendChild(s)},$(document).on("change input keyup",".is-invalid",function(){$(this).removeClass("is-invalid")}),$(document).on("input paste","#price",function(){this.value=this.value.replace(/[^0-9.]/g,"")}),$(document).on("change","#price",function(){this.value=parseFloat(this.value).toFixed(2)}),g.setRequiredInputsStar(),g.setupDatePicker()})();var p=!1,m=!0,c=_s.getUrlVars(["page"]);$(function(){_s.getItemsList(),$(window).scroll(function(){m&&!p&&$(window).scrollTop()+$(window).height()>$(document).height()-60&&_s.getItemsList()})});_s.getItemsList=function(e){c={...c,...e},m&&!p&&($(".loading-data").remove(),$("#page-data-list").append('<div class="py-3 text-center loading-data"><i class="fa fa-spinner fa-spin text-primary"></i></div>'),p=!0,$.ajax({method:"GET",url:GLOBAL.PAGE_URL,data:c,dataType:"JSON",cache:!1}).always(a=>{p=!1}).done(a=>{$(".loading-data").remove(),a&&($("#page-data-list").append(a.data),m=a.next_page_url,c.cursor=a.next_cursor)}))};let v=window.location,l=v.origin+v.pathname,b=l+"/create",w=l+"/editId/edit",h="#formModalId";_s.dataFormId="#dataFormId";_s.openCreateForm=function(e,a=!1){$(e).prop("disabled",!0).find("i").removeClass("fa-plus").addClass("fa-spinner fa-spin");let i=a==!1?b:w.replace("editId",a);$.get(i).always(t=>{$(e).prop("disabled",!1).find("i").removeClass("fa-spinner fa-spin").addClass("fa-plus")}).done(t=>{window.$(h).modal("hide").remove(),$("body").append(t.form),window.$(h).modal("show")}).fail(t=>{_s.handleFailure(t)})};_s.submitCreate=function(e){if(tinyMCE.triggerSave(),!_s.validateForm(_s.dataFormId))return!1;$(e).prop("disabled",!0).find("span").hide().parent().find("i").remove(),$(e).append('<i class="fa fa-spinner fa-spin"></i>');let a=$(_s.dataFormId).find("input[name=model_id]").val()||!1,i=a?l+"/"+a:l;$.ajax({method:"POST",url:i,data:$(_s.dataFormId).serialize(),dataType:"JSON"}).always(t=>{$(e).prop("disabled",!1).find("span").show().parent().find("i").remove()}).done(t=>{if(toastr.success(t.message||"OK"),$(h).modal("hide").remove(),t.new_content&&$(t.new_content.target).after(t.new_content.content).remove(),t.prepend){let s=$(t.prepend.content);$("#"+s.attr("id")).length?$("#"+s.attr("id")).after(t.prepend.content).remove():$(t.prepend.target).prepend(t.prepend.content).find(".no-data").remove()}}).fail(t=>{_s.handleFailure(t)})};_s.checkedIdsList=function(){let e=[];return $("input.checkbox___item[type=checkbox]:checked").each(function(a){e[a]=$(this).val()}),e};_s.multipleDelete=function(){var a;let e=_s.checkedIdsList();if(!e.length)return toastr.warning(lang.js_messages.select_items_first),!1;if(!confirm((a=lang.js_messages.multiple_delete_confirmation_message)!=null?a:"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0639\u0645\u0644\u064A\u0629 \u0627\u0644\u062D\u0630\u0641\u061F"))return!1;$.ajax({method:"POST",url:l,data:{_method:"DELETE",ids:e},dataType:"JSON"}).done(i=>{toastr.success(i.message||"OK"),i.targets&&$(i.targets).remove()}).fail(i=>{_s.handleFailure(i)})};_s.onDelete=function(e,a){var i;if(!confirm((i=lang.js_messages.delete_confirmation_message)!=null?i:"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0639\u0645\u0644\u064A\u0629 \u0627\u0644\u062D\u0630\u0641\u061F"))return!1;$(e).prop("disabled",!0),$.ajax({method:"POST",url:l+"/"+a,data:{_method:"DELETE"},dataType:"JSON"}).done(t=>{toastr.success(t.message||"OK"),t.target&&$(t.target).remove()}).fail(t=>{_s.handleFailure(t)})};_s.checkAllItems=function(e){$(e).prop("checked")?$("input.checkbox___item[type=checkbox]").prop("checked",!0).change():$("input.checkbox___item[type=checkbox]").prop("checked",!1).change()};$(document).on("change",".toggle_status",function(){var e=$(this).prop("checked")||$(this).val();$.post(GLOBAL.PAGE_URL+"/toggle_status/"+$(this).data("id"),{status:e,_method:"PUT"},function(a){toastr.success(a.message||"OK")})});
